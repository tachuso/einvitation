<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box Card</title>
    <link rel="stylesheet" type="text/css" href="styles/styles.min.css">
</head>

<body>
    <div id="background">
        <img src="img/bg.jpeg">
    </div>

    <header id="mainHeader">
        <p>★★★★★★★★★★★★★★★★★★★★★★★★★★★</p>
        <h1>
            <span class="bsd">OMAR</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 262.36 384.36">
                <g id="Capa1" data-name="Capa1">
                    <path
                        d="M251.72,131.26c12.2-25.46,13.91-48.43,5.12-68.25C240.08,25.38,144.23-20.6,96.11,10,81.71,19,72.3,34.75,65.09,50.85h0a29.53,29.53,0,0,0-23.85-6.43c-14.52,2.85-24.5,18.12-28.65,30.32-16.41,48.13-16.76,86.41-1.14,116.86a98.28,98.28,0,0,0,15.09,21.57c-.22.39-10.45,28.57-10.45,28.57a45.35,45.35,0,0,0,24.28,56.88L27.81,333.34a8.76,8.76,0,0,0,16.49,5.91L56.64,305l11.68,4.37-23,63.66h0A8.75,8.75,0,0,0,61.76,379L84.6,315.75l11.68,4.38L83.76,354.78h0a8.76,8.76,0,0,0,16.49,5.9l12.38-34.3c4.38,1.54,38,13.83,54.56-26.9C171.93,287.8,184,252,184,252c19.51-17,34-48.13,52.5-87.77,4.42-9.93,9.54-21,15.18-32.94ZM153.41,285.87l-26-10.24a8.75,8.75,0,1,0-6.34,16.23l25,10c-2.58,3.28-7,16.32-29.05,8.27L47.71,283.07a27.87,27.87,0,0,1-15.35-35.48l7.83-21.88c22.66,17.76,51.32,29.1,78.75,36.31h0a114.46,114.46,0,0,0,41.91,2.76Zm66.85-128.36C184,235.82,170.35,259.93,124,245.71c-37.53-11.73-79.18-27-97.17-62C13.46,157.51,14.15,123.91,29,80.42c2.23-6.52,8.4-17.5,15.49-18.81,4.63-.92,9.71,2.58,13.82,6.6a269.37,269.37,0,0,0-12,68.73,8.75,8.75,0,1,0,17.5.48c0-.83,2.76-84.83,42.44-113.18C137.49,1.71,227.35,39.73,240.83,70c6.64,15,5,33-4.9,53.73-5.69,11.9-10.85,23.19-15.67,33.77Z" />
                    <path
                        d="M179.23,192a8.75,8.75,0,0,0-12.17,2.36c-11.81,17.5-22.27,21.48-41.56,15.75a8.75,8.75,0,1,0-5,16.71A68.83,68.83,0,0,0,139.94,230c16.76,0,29.79-8.31,41.65-25.9h0A8.75,8.75,0,0,0,179.23,192Z" />
                    <path
                        d="M153.89,34.49,152.22,34h0a8.75,8.75,0,1,0-5.12,16.67l1.7.52c15.58,4.68,48.13,14.48,57.23,35.48,4.38,10.24,3.41,22.27-3.5,36.75h0a8.75,8.75,0,0,0,15.79,7.48c9.1-19.08,10.37-36.32,3.72-51.28C209.49,51.28,172,40,153.89,34.49Z" />
                    <path
                        d="M100.47,266.4a7.39,7.39,0,0,0-9.63,4.37,7.84,7.84,0,0,0,4.38,10,7.38,7.38,0,0,0,9.62-4.38A7.82,7.82,0,0,0,100.47,266.4Z" />
                    <path
                        d="M59.35,161.14a7.39,7.39,0,0,0-9.63,4.37,7.84,7.84,0,0,0,4.38,10,7.38,7.38,0,0,0,9.62-4.38,7.82,7.82,0,0,0-4.37-10Z" />
                </g>
            </svg>
            <span class="bsid">51</span>
        </h1>

        <p>★★★★★★★★★★★★★★★★★★★★★★★★★★</p>
    </header>
    <!-- Boxing Gloves by WEBTECHOPS LLP from NounProject.com -->
    <main>
        <section id="banner1">
            <header>
                <h1>- GRAN <s>COMBATE</s> -<span class="fiesta">FIESTA!</span></h1>
            </header>
            <p class="imbue uppercase letter-spacing-1 w700">Sábado 8 de Enero</p>
            <br>
            <p class="imbue uppercase">Celebrando el cumpleaños</p>
            <p class="imbue uppercase">de un grande</p>
            <p class="bsd w900 uppercase omar">Omar Angio</p>
            <hr>
            <p class="imbue uppercase letter-spacing-2 w700">★★★★★</p>
        </section>
        <section id="photo1">
            <img src="img/omar3.jpg" alt="">
        </section>
        <section id="banner2">
            <hr>
            <p class="imbue uppercase letter-spacing-2 w700">Nos reunimos en</p>
            <p class="details w900">CLUB JUDICIAL</p>
            <p class="imbue center">Villa Mercedes, San Luis</p>
            <hr>
            <br>
            <p class="imbue uppercase letter-spacing-2 w700">¡¡¡A la canasta!!!</p>
            <br>
            <p class="imbue center">1er ENCUENTRO: CENA - Comida y Bebida</p>
            <p class="details2 bsid uppercase w500">Llevá tu comida</p>
            <p class="imbue center">2do ENCUENTRO: SOBREMESA - Soplamos las velas</p>
            <p class="details2 bsd uppercase w900">Llevá tu bebida</p>
            <p class="imbue center">3er ENCUENTRO: BAILE - a cargo de DJ Omar</p>
            <p class="details2 bsid w500">OMAR vs LA CONSOLA</p>

            <br>
            <hr>
            <a class="button"
                href="https://www.google.com/maps/place/Club+Judicial/@-33.6754041,-65.5028047,991m/data=!3m1!1e3!4m5!3m4!1s0x95d141014860676f:0xf90067caf0e5a415!8m2!3d-33.6748095!4d-65.5027539"
                target="_blank" class="uppercase">Ver ubicación</a>
            <hr>
        </section>
        <section id="photos2">
            <article class="photo">
                <img src="img/omar1.jpg" alt="">
            </article>
            <article class="photo">
                <img src="img/omar2.jpg" alt="">
            </article>

        </section>

        <section id="banner3">
            <article>
                <h1 class="imbue uppercase letter-spacing-1 w900 center">- Importante -</h1>
                <br>
                <p class="imbue uppercase w500 center">Para disfrutar con seguridad debemos respetar las medidas
                    sanitarias vigentes</p>
                <div class="rules">
                    <div class="rule center"><img class="mask" src="img/mask.svg" alt="">
                        <p>usar tapabocas</p>
                    </div>
                    <div class="rule center"><img class="vaccine" src="img/vaccine.svg" alt="">
                        <p>acreditar pase sanitario</p>
                    </div>
                </div>
            </article>

        </section>
        <section id="photo4">
            <img src="img/omar5.jpg" alt="">
        </section>
        <section id="form">
            <article>
                <h1 class="imbue uppercase letter-spacing-1 w900 center">★ Confirmá Asistencia ★</h1>
                <br>
                <form action="">
                    <label class="imbue uppercase" for="lastname">Apellido/s:</label>
                    <input class="hand" type="text" id="lastname" name="lastname" placeholder="ejemplo: Angio" required 
                    oninvalid="this.setCustomValidity('Debes ingresar un apellido')"
                    oninput="setCustomValidity('')">

                    <label class="imbue uppercase" for="firstname">Nombre/s:</label>
                    <input class="hand" type="text" id="firstname" name="firstname" placeholder="ejemplo: Eduardo Omar" required
                    oninvalid="this.setCustomValidity('Debes ingresar un nombre')"
                    oninput="setCustomValidity('')">

                    <label class="imbue uppercase" for="email">Email:</label>
                    <input class="hand" type="email" id="email" name="email" placeholder="ejemplo: omar@box.app" required
                    oninvalid="this.setCustomValidity('Debes ingresar un email válido')"
                    oninput="setCustomValidity('')">

                    <label class="imbue uppercase" for="phone">Teléfono:</label>
                    <input class="hand" type="tel" id="phone" name="phone" placeholder="ejemplo: 2657505133" required
                    oninvalid="this.setCustomValidity('Debes ingresar un teléfono')"
                    oninput="setCustomValidity('')">

                    <p class="imbue uppercase">Esquema de Vacunación COVID:</p>
                    <input type="radio" name="dosis" id="dosis0" value="0">
                    <label for="dosis0">Sin vacuna COVID</label>

                    <input type="radio" name="dosis" id="dosis1" value="1">
                    <label for="dosis1">1 dosis</label>

                    <input type="radio" name="dosis" id="dosis2" value="2" checked>
                    <label for="dosis2">2 dosis</label>

                    <input type="radio" name="dosis" id="dosis3" value="3">
                    <label for="dosis3">3 dosis</label>

                    <button class="bsd uppercase w900">REGISTRARME</button>
                </form>
            </article>

        </section>

        <section id="banner4">

            <article>
                <img src="img/omar4.jpg" alt="">
                <h1 class="imbue uppercase letter-spacing-1 w900">¿ Dudas ?</h1>
                <br>
                <p class="imbue uppercase w500 center">Estamos a un Whatsapp de distancia. ¡Escribime!</p>
                <a href="https://wa.link/s5f1sr" class="button center">Contactar por WhatsApp</a>
            </article>

        </section>
        <footer></footer>


    </main>

    <section id="dialogContainer" class="hide">
        <section id="dialog">
            <article>
                <h1 class="imbue uppercase letter-spacing-1 w900"></h1>
                <br>
                <p class="imbue uppercase w500 center"></p>
                <button class="bsd uppercase w900">OK</button>
            </article>
        </section>

    </section>
    <script>
        const theForm = document.querySelector('#form>article>form');

        theForm.addEventListener('submit', (event) => {
            event.preventDefault();

            const data = {
                email: theForm.elements["email"].value,
                phone: theForm.elements["phone"].value,
                name: {
                    first: theForm.elements["firstname"].value,
                    last: theForm.elements["lastname"].value
                },
                vaccine: theForm.dosis["value"]
            }

            fetch("/api/guests", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    if (data.errors) {
                        showDialog("¡Error al guardar!", "Revisa los datos e intenta nuevamente")
                    } else {
                        showDialog("Registro guardado", "Tus datos han sido guardados. ¡Gracias!");
                    }



                })
                .catch(err => showDialog("¡Error al guardar!", "Revisa los datos e intenta nuevamente"));
        });

        function showDialog(title, description) {
            const dialog = document.querySelector('#dialogContainer');
            dialog.querySelector("h1").innerHTML = title;
            dialog.querySelector("p").innerHTML = description;
            dialog.querySelector("button").onclick = () => {
                dialog.classList.remove("fadeIn")
                dialog.classList.add("fadeOut");
                setTimeout(() => {
                    dialog.classList.remove("fadeOut");
                    dialog.classList.add("hide");
                }, 500);
            };

            dialog.classList.remove("fadeOut", "hide");
            dialog.classList.add('fadeIn');


        }


    </script>
</body>

</html>